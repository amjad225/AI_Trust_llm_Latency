{
  "filename": "BOT-6461-mixed-timing-test.json",
  "name": "BOT-6461: Mixed Evaluation Timing Test",
  "description": "Test showing mixed evaluation scenarios: some objectives evaluated immediately (current scope), others evaluated across conversation (any/recent scope). Demonstrates when 'current' should point to specific turns vs. conversation-wide evaluation.",
  "domain": "evaluation timing validation",
  "compositeObjectives": [
    {
      "name": "Mixed Timing Scenarios",
      "description": "Combination of immediate evaluation and conversation-wide evaluation",
      "persona": "Mixed Timing Test User",
      "userVariables": {
        "testScenario": "mixed_evaluation_timing"
      },
      "subObjectives": [
        {
          "description": "IMMEDIATE: First response must contain greeting",
          "instructions": "Say 'Hello' and expect immediate greeting response. This MUST be evaluated right after Turn 1, with 'current' = Turn 1.",
          "isBlocking": false,
          "onFailure": null,
          "turnMatching": {
            "scope": "current",
            "evaluationStrategy": "first_match"
          }
        },
        {
          "description": "CONVERSATION-WIDE: Bot maintains professional tone",
          "instructions": "Throughout the conversation, bot should maintain professional tone. This can be evaluated at conversation end, looking across all turns.",
          "isBlocking": false,
          "onFailure": null,
          "turnMatching": {
            "scope": "any",
            "evaluationStrategy": "best_match"
          }
        },
        {
          "description": "IMMEDIATE: Second response asks for clarification",
          "instructions": "Ask a vague question and expect bot to ask for clarification. This MUST be evaluated right after Turn 2, with 'current' = Turn 2.",
          "isBlocking": false,
          "onFailure": null,
          "turnMatching": {
            "scope": "current",
            "evaluationStrategy": "first_match"
          }
        },
        {
          "description": "RECENT: Bot provides helpful response in recent turns",
          "instructions": "Provide specific question and expect helpful response. Can be evaluated looking at recent turns (last 2-3 turns).",
          "isBlocking": false,
          "onFailure": null,
          "turnMatching": {
            "scope": "recent",
            "evaluationStrategy": "best_match",
            "recentTurnCount": 3
          }
        }
      ]
    }
  ]
} 