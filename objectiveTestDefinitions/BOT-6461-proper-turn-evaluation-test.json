{
  "filename": "BOT-6461-proper-turn-evaluation-test.json",
  "name": "BOT-6461: Proper Turn-by-Turn Evaluation Test",
  "description": "Test to validate that objectives are evaluated at the correct turn moments. Turn 1 objectives should be evaluated IN Turn 1, Turn 2 objectives IN Turn 2, etc. The 'current' scope should always refer to the actual evaluation turn.",
  "domain": "turn timing validation",
  "compositeObjectives": [
    {
      "name": "Turn-by-Turn Evaluation Validation",
      "description": "Each objective should be evaluated at its intended turn, not all at the end",
      "persona": "Turn Timing Test User", 
      "userVariables": {
        "testType": "turn_evaluation_timing"
      },
      "subObjectives": [
        {
          "description": "TURN 1: Bot greets user in first response",
          "instructions": "Start with 'Hello' and expect bot to greet you. This should be evaluated DURING Turn 1, not later. When evaluated, 'current' scope should point to Turn 1.",
          "isBlocking": false,
          "onFailure": null,
          "turnMatching": {
            "scope": "current",
            "evaluationStrategy": "first_match"
          }
        },
        {
          "description": "TURN 2: Bot asks for details in second response", 
          "instructions": "Ask a general question and expect bot to ask for more details. This should be evaluated DURING Turn 2, not later. When evaluated, 'current' scope should point to Turn 2.",
          "isBlocking": false,
          "onFailure": null,
          "turnMatching": {
            "scope": "current",
            "evaluationStrategy": "first_match"
          }
        },
        {
          "description": "TURN 3: Bot provides helpful information in third response",
          "instructions": "Provide specific details and expect bot to give helpful information. This should be evaluated DURING Turn 3, not later. When evaluated, 'current' scope should point to Turn 3.",
          "isBlocking": false,
          "onFailure": null,
          "turnMatching": {
            "scope": "current", 
            "evaluationStrategy": "first_match"
          }
        }
      ]
    }
  ]
} 